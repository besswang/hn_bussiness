webpackJsonp([22],{"7YM0":function(e,t){},"X/La":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("woOf"),r=s.n(a),i=(s("ylrw"),s("+BTi"),s("6oiW")),o=s.n(i),l=(s("Q6SQ"),s("LQMI")),n=s.n(l),d=(s("Yq4J"),s("qubY")),c=s.n(d),u=(s("8jhb"),s("RDoK")),m=s.n(u),h=(s("BNJR"),s("fDPO")),p=s.n(h),f=(s("I4nB"),s("STLj")),v=s.n(f),g=(s("cDSy"),s("e0Bm")),b=s.n(g),F=(s("X+ky"),s("HJMx")),_=s.n(F),S=(s("+Rdb"),s("Mezo")),y=s.n(S),I=(s("qunJ"),s("vqwl")),$=s.n(I),x=(s("M9yL"),s("OSLW")),C=s.n(x),w=(s("/i/W"),s("V1RD")),k=s.n(w),D=(s("GXEp"),s("mtrD")),L=s.n(D),T=(s("jZDA"),s("91Nw")),E=s.n(T),U=(s("d7TW"),s("ajQY")),j=/^1[3|4|5|7|8][0-9]\d{8}$/,z=/^0\d{2,3}-?\d{7,8}$/,A=function(e,t,s){t?z.test(t)||j.test(t)?s():s(new Error("请输入有效的电话号码")):s(t="")},q=function(e,t,s){t?j.test(t)?s():s(new Error("请输入正确的11位手机号码")):s(new Error("请填写手机号"))},V={name:"issue",components:{"el-row":s.n(U).a,"el-col":E.a,"el-button":L.a,"el-breadcrumb":k.a,"el-breadcrumb-item":C.a,"el-form":$.a,"el-form-item":y.a,"el-input":_.a,"el-select":b.a,"el-option":v.a,"el-radio-group":p.a,"el-radio":m.a,"el-dialog":c.a,"el-card":n.a,"el-pagination":o.a},data:function(){return{hintShow:!1,loadUse:!1,isDefaultShow:!1,isSend:1,addressId:"",addressData:[],pageNum:1,pageSize:5,total:0,addressText:"",dialogTitle:"",addressFormVisible:!1,formLabelWidth:"120px",ruleForm:{contact:"",provinceId:"",cityId:"",areaId:"",areaInfo:"",mobile:"",tele:"",postcodes:"",isDefault:1},provs:[],citys:[],areas:[],rules:{provinceId:[{required:!0,message:"请选择省",trigger:"blur"}],cityId:[{required:!0,message:"请选择市",trigger:"blur"}],areaId:[{required:!0,message:"请选择区",trigger:"blur"}],contact:[{required:!0,message:"请输入联系人姓名（最多20字）",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],areaInfo:[{required:!0,message:"请填写详细地址",trigger:"blur"}],mobile:[{required:!0,validator:q,trigger:"blur"}],postcodes:[{required:!0,message:"请填写邮政编码",trigger:"blur"}],tele:[{validator:A,trigger:"blur"}]}}},created:function(){this.$store.state.adminleftnavnum=this.$route.path,this.changeRoute()},mounted:function(){var e=this;this.$axios.post(this.$$jk.getAllProvince,{}).then(function(t){"SUCCESS"==t.data.code&&(e.provs=t.data.data)}).catch(function(e){alert(e)})},watch:{$route:"changeRoute"},methods:{defaultAddress:function(e){var t=this;this.$axios.post(this.$$jk.updateAddrsToDefaultById,{id:e,isSend:this.isSend}).then(function(e){"SUCCESS"==e.data.code&&(t.$message({message:"默认地址设置成功",type:"SUCCESS"}),t.addressLists())}).catch(function(e){alert(e)})},editorFn:function(e,t){this.isDefaultShow=1==t,this.addressId=e.id,this.addressFormVisible=!0,this.changeProv(e.provinceId),this.changeCity(e.cityId),this.ruleForm.contact=e.contact,this.ruleForm.provinceId=e.provinceId,this.ruleForm.cityId=e.cityId,this.ruleForm.areaId=e.areaId,this.ruleForm.areaInfo=e.areaInfo,this.ruleForm.mobile=e.mobile,this.ruleForm.tele=e.tele,this.ruleForm.postcodes=e.postcodes,this.ruleForm.isDefault=e.isDefault},handleSizeChange:function(e){this.pageSize=e,this.addressLists()},handleCurrentChange:function(e){this.pageNum=e,this.addressLists()},addressLists:function(){this.addressData=[];var e=this,t=sessionStorage.getItem("merchantId"),s={isSend:this.isSend,merchantId:t,pageNum:this.pageNum,pageSize:this.pageSize};this.$axios.post("getAddrsListByMerchantId",s).then(function(t){if("SUCCESS"==t.data.code){var s=t.data.data;e.addressData=s.list,e.total=s.total,0==s.list.length&&(e.hintShow=!0)}setTimeout(function(){e.loadUse=!1},500)}).catch(function(e){alert(e)})},changeRoute:function(){this.loadUse=!0,"/address"==this.$route.path?(this.addressText="发货",this.dialogTitle="填写发货地址",this.isSend=1):(this.addressText="退货",this.dialogTitle="填写退货地址",this.isSend=2),this.addressLists()},addFn:function(){this.isDefaultShow=!1,this.addressFormVisible=!0,this.addressId="",this.ruleForm.contact="",this.ruleForm.contact="",this.ruleForm.provinceId="",this.ruleForm.cityId="",this.ruleForm.areaId="",this.ruleForm.areaInfo="",this.ruleForm.mobile="",this.ruleForm.tele="",this.ruleForm.postcodes="",this.ruleForm.isDefault=1},submitForm:function(e){var t=this,s=this;this.$refs[e].validate(function(a){if(!a)return console.log("error submit!!"),!1;var i=r()(t.ruleForm,{isSend:t.isSend});if(t.addressId){var o=r()(i,{id:t.addressId});console.log(o),t.$axios.post(t.$$jk.merchantAddrsEdit,o).then(function(t){"SUCCESS"==t.data.code&&(s.$message({type:"success",message:"修改成功"}),s.addressFormVisible=!1,s.resetForm(e),s.addressLists())}).catch(function(e){})}else t.$axios.post(t.$$jk.merchantAddrsSave,i).then(function(t){"SUCCESS"==t.data.code&&(s.$message({type:"success",message:"保存成功"}),s.addressFormVisible=!1,s.resetForm(e),s.addressLists())}).catch(function(e){})})},resetForm:function(e){this.$refs[e].resetFields()},cancelForm:function(e){this.$refs[e].resetFields(),this.addressFormVisible=!1},delAddress:function(e){var t=this;this.$axios.post(this.$$jk.merchantAddrsDelete,{id:e}).then(function(e){"SUCCESS"==e.data.code&&(t.$message({type:"success",message:"删除成功"}),t.addressLists())}).catch(function(e){})},changeProv:function(e){var t=this;this.ruleForm.cityId="",this.ruleForm.areaId="",this.citys=[],this.areas=[],this.$axios.post(this.$$jk.getCities,{provinceId:e}).then(function(e){"SUCCESS"==e.data.code?t.citys=e.data.data:t.$message({type:"error",message:e.data.remark})}).catch(function(e){t.$message({type:"error",message:e})})},changeCity:function(e){var t=this;this.ruleForm.areaId="",this.areas=[],this.$axios.post(this.$$jk.getAreas,{cityId:e}).then(function(e){"SUCCESS"==e.data.code?t.areas=e.data.data:t.$message({type:"error",message:e.data.remark})}).catch(function(e){t.$message({type:"error",message:e})})}}},W={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"list"},[s("div",{staticClass:"source"},[s("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[s("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("商家中心")]),e._v(" "),s("el-breadcrumb-item",[e._v(e._s(e.addressText)+"地址")])],1)],1),e._v(" "),s("div",{staticClass:"add-con"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.hintShow,expression:"hintShow"}],staticStyle:{padding:"80px 0","text-align":"center"}},[s("span",{staticClass:"address-icon"},[e._v("你还没有编辑任何"+e._s(e.addressText)+"地址，点击以下按钮新建")])]),e._v(" "),e.addressData.length<21?s("el-button",{staticClass:"add-btn",attrs:{type:"primary"},on:{click:e.addFn}},[s("i",{staticClass:"el-icon-plus"}),e._v(" 新建"+e._s(e.addressText)+"地址")]):e._e()],1),e._v(" "),s("el-dialog",{attrs:{title:e.dialogTitle,visible:e.addressFormVisible,width:"60%"},on:{"update:visible":function(t){e.addressFormVisible=t}}},[s("el-form",{ref:"ruleForm",staticClass:"expressForm",attrs:{model:e.ruleForm,rules:e.rules}},[s("el-form-item",{attrs:{label:"联系人:","label-width":e.formLabelWidth,prop:"contact"}},[s("el-input",{attrs:{placeholder:"请输入联系人姓名（最多20字）"},model:{value:e.ruleForm.contact,callback:function(t){e.$set(e.ruleForm,"contact",t)},expression:"ruleForm.contact"}})],1),e._v(" "),s("el-form-item",[s("label",{staticClass:"self-label",attrs:{for:""}},[s("span",{staticStyle:{color:"red"}},[e._v("* ")]),e._v("所在地区:")]),e._v(" "),s("div",{staticStyle:{width:"calc(100% - 120px)","margin-left":"120px"}},[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{prop:"provinceId"}},[s("el-select",{attrs:{placeholder:"请选择省"},on:{change:e.changeProv},model:{value:e.ruleForm.provinceId,callback:function(t){e.$set(e.ruleForm,"provinceId",t)},expression:"ruleForm.provinceId"}},e._l(e.provs,function(e,t){return s("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{prop:"cityId"}},[s("el-select",{attrs:{placeholder:"请选择市"},on:{change:e.changeCity},model:{value:e.ruleForm.cityId,callback:function(t){e.$set(e.ruleForm,"cityId",t)},expression:"ruleForm.cityId"}},e._l(e.citys,function(e,t){return s("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{prop:"areaId"}},[s("el-select",{attrs:{placeholder:"请选择区"},model:{value:e.ruleForm.areaId,callback:function(t){e.$set(e.ruleForm,"areaId",t)},expression:"ruleForm.areaId"}},e._l(e.areas,function(e,t){return s("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1)],1)],1)]),e._v(" "),s("el-form-item",{attrs:{label:"详细地址:","label-width":e.formLabelWidth,prop:"areaInfo"}},[s("el-input",{attrs:{"auto-complete":"off"},model:{value:e.ruleForm.areaInfo,callback:function(t){e.$set(e.ruleForm,"areaInfo",t)},expression:"ruleForm.areaInfo"}})],1),e._v(" "),s("el-form-item",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"手机号码:","label-width":e.formLabelWidth,prop:"mobile"}},[s("el-input",{attrs:{"auto-complete":"off",type:"number"},model:{value:e.ruleForm.mobile,callback:function(t){e.$set(e.ruleForm,"mobile",t)},expression:"ruleForm.mobile"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"电话号码:","label-width":e.formLabelWidth,prop:"tele"}},[s("el-input",{attrs:{"auto-complete":"off"},model:{value:e.ruleForm.tele,callback:function(t){e.$set(e.ruleForm,"tele",t)},expression:"ruleForm.tele"}})],1)],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"邮政编码:","label-width":e.formLabelWidth,prop:"postcodes"}},[s("el-input",{attrs:{"auto-complete":"off",type:"number"},model:{value:e.ruleForm.postcodes,callback:function(t){e.$set(e.ruleForm,"postcodes",t)},expression:"ruleForm.postcodes"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"是否设置为默认地址:"}},[s("el-radio-group",{model:{value:e.ruleForm.isDefault,callback:function(t){e.$set(e.ruleForm,"isDefault",t)},expression:"ruleForm.isDefault"}},[s("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),0!=e.addressData.length?s("el-radio",{attrs:{label:0,disabled:e.isDefaultShow}},[e._v("否")]):e._e()],1)],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("保存"+e._s(e.addressText)+"地址")]),e._v(" "),s("el-button",{attrs:{type:"warning"},on:{click:function(t){e.resetForm("ruleForm")}}},[e._v("重置")]),e._v(" "),s("el-button",{on:{click:function(t){e.cancelForm("ruleForm")}}},[e._v("取 消")])],1)],1),e._v(" "),s("div",{staticClass:"address-list-con"},[s("h3",{staticClass:"add-list-title"},[e._v("您已创建"+e._s(e.addressData.length)+"个"+e._s(e.addressText)+"地址，最多可创建"),s("span",[e._v("20")]),e._v("个")]),e._v(" "),s("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loadUse,expression:"loadUse"}]},e._l(e.addressData,function(t,a){return s("el-col",{key:a,staticClass:"address-col",attrs:{span:8}},[s("el-card",{class:1==t.isDefault?"box-card":""},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"header-title"},[e._v("测试账户")]),e._v(" "),1!=t.isDefault?s("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(s){e.delAddress(t.id)}}},[e._v("删除")]):e._e(),e._v(" "),s("el-button",{staticStyle:{float:"right",padding:"3px 15px"},attrs:{type:"text"},on:{click:function(s){e.editorFn(t,t.isDefault)}}},[e._v("编辑")]),e._v(" "),1!=t.isDefault?s("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(s){e.defaultAddress(t.id)}}},[e._v("设为默认地址")]):e._e()],1),e._v(" "),s("ul",{staticClass:"address-ul"},[s("li",[s("span",[e._v("联系人: ")]),e._v(e._s(t.contact))]),e._v(" "),s("li",[s("span",[e._v("地址: ")]),e._v(e._s(t.areaInfo))]),e._v(" "),s("li",[s("span",[e._v("邮政: ")]),e._v(e._s(t.postcodes))]),e._v(" "),s("li",[s("span",[e._v("电话: ")]),e._v(e._s(t.tele))]),e._v(" "),s("li",[s("span",[e._v("手机: ")]),e._v(e._s(t.mobile))])])])],1)}))],1),e._v(" "),s("div",{staticStyle:{padding:"15px"}},[s("el-pagination",{attrs:{"current-page":e.pageNum,"page-sizes":[5,10,15,20],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var N=s("VU/8")(V,W,!1,function(e){s("7YM0")},"data-v-1914dd5e",null);t.default=N.exports}});
//# sourceMappingURL=22.afb51503c47a00c7c10f.js.map