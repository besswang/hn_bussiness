webpackJsonp([15],{dEPi:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("pFYg"),a=s.n(i),o=s("mvHQ"),n=s.n(o),l=(s("dmRH"),s("+BTi"),s("EKTV")),r=s.n(l),c=(s("ylrw"),s("6oiW")),d=s.n(c),h=(s("s967"),s("855/")),u=s.n(h),m=(s("Dte2"),s("q4le")),f=s.n(m),p=(s("isE6"),s("LR6y")),v=s.n(p),g=(s("DSCY"),s("LaeV")),b=s.n(g),S=(s("IxJZ"),s("NoPp")),k=s.n(S),w=(s("X+ky"),s("HJMx")),_=s.n(w),y=(s("+Rdb"),s("Mezo")),C=s.n(y),x=(s("qunJ"),s("vqwl")),I=s.n(x),$=(s("isgN"),s("tLa+")),N=s.n($),T=(s("M9yL"),s("OSLW")),F=s.n(T),U=(s("/i/W"),s("V1RD")),M=s.n(U),z=(s("GXEp"),s("mtrD")),D=s.n(z),V=(s("Yq4J"),s("qubY")),E=s.n(V),j=(s("jZDA"),s("91Nw")),L=s.n(j),O=(s("d7TW"),s("ajQY")),q=s.n(O),B=(s("cwe7"),s("2X9z")),G=s.n(B),R=(s("oq7i"),s("+TD8")),P={name:"issue",components:{MessageBox:s.n(R).a,Message:G.a,"el-row":q.a,"el-col":L.a,"el-dialog":E.a,"el-button":D.a,"el-breadcrumb":M.a,"el-breadcrumb-item":F.a,"el-date-picker":N.a,"el-form":I.a,"el-form-item":C.a,"el-input":_.a,"el-tabs":k.a,"el-tab-pane":b.a,"el-table":v.a,"el-table-column":f.a,"el-tree":u.a,"el-pagination":d.a,"el-checkbox":r.a},data:function(){return{goodsMerchantCategoryIds:[],disabledBtn:!1,loadUse:!0,startTime:"",endTime:"",isShow:1,isShelves:0,batchText:"",sels:[],pageNum:1,pageSize:5,total:0,stocksFlag:!0,treeStructure:!0,dialogTreeVisible:!1,treedata:[],dialogFormVisible:!1,formLabelWidth:"60px",formstocks:0,formstocksId:"",okid:"",list:[],formInline:{timevalue:"",productName:""},activeName:"1"}},computed:{},created:function(){this.$store.state.adminleftnavnum="/product_list"},mounted:function(){var t=this.$route.query.pState;t&&(this.activeName=t,2==t?(this.isShow=0,this.isShelves=1):(this.isShow=t,this.isShelves=0)),this.listFn(this.pageNum,this.pageSize,this.isShow,this.isShelves)},methods:{formstocksF:function(){this.disabledBtn=!1},listFn:function(){var t=this,e={pageNum:this.pageNum,pageSize:this.pageSize,isShow:this.isShow,isShelves:this.isShelves,startDate:this.startTime,endDate:this.endTime,name:this.formInline.productName};this.$axios.post("getMerchantGoodsList",e).then(function(e){if("SUCCESS"==e.data.code){var s=e.data.data;t.total=s.total,t.list=s.list}setTimeout(function(){t.loadUse=!1},500)}).catch(function(t){alert(t)})},detail:function(t){window.open("http://testshop.51myd.com/hn_shop/#/goods_detail?id="+t)},putaway:function(t,e){this.loadUse=!0;var s=this;e=e instanceof Object?n()(e):n()([e]),1==t?(this.isShow=1,this.$axios.post(this.$$jk.undercarriageGoods,{goodsIds:e}).then(function(t){"SUCCESS"==t.data.code&&setTimeout(function(){s.listFn(),s.$message({type:"success",message:"下架成功!"})},1e3)}).catch(function(t){alert(t)})):(this.isShow=0,this.$axios.post(this.$$jk.shelvesGoods,{goodsIds:e}).then(function(t){"SUCCESS"==t.data.code&&setTimeout(function(){s.listFn(),s.$message({type:"success",message:"上架成功!"})},1e3)}).catch(function(t){alert(t)}))},handleSizeChange:function(t){this.loadUse=!0,this.pageSize=t,this.listFn()},handleCurrentChange:function(t){this.loadUse=!0,this.pageNum=t,this.listFn()},editor:function(t){this.$router.push({path:"/editor",query:{goodsId:t.id}})},getCheckedNodes:function(){var t=this,e=void 0;e=this.goodsMerchantCategoryIds.length>0?this.goodsMerchantCategoryIds.join(","):"",this.$axios.post(this.$$jk.addGoodsMerchantCategoryIndices,{goodsId:this.okid,goodsMerchantCategoryIds:e}).then(function(e){"SUCCESS"==e.data.code&&(t.dialogTreeVisible=!1,t.$message({message:"保存成功",type:"SUCCESS"}))}).catch(function(t){alert(t)})},relevance:function(t,e){var s=this;this.goodsMerchantCategoryIds=[],this.dialogTreeVisible=!0,this.okid=e.id,console.log(this.okid),this.treedata=[],this.$axios.post(this.$$jk.getGoodsMerchantCategoriesDetail,{goodsId:this.okid}).then(function(t){if("SUCCESS"==t.data.code){var e=t.data.data;s.treedata=e}}).catch(function(t){alert(t)})},handleEdit:function(t){},handleSave:function(t){},mdf:function(t,e){this.disabledBtn=!1,this.stocksFlag=!1,this.dialogFormVisible=!0,this.formstocks=t,this.formstocksId=e},okmdf:function(){this.disabledBtn=!0;var t=this;if(!this.formstocks||!/^[0-9]+$/.test(this.formstocks))return this.$message({message:"库存应该为整数",type:"warning"}),!1;this.loadUse=!0,this.$axios.post(this.$$jk.updateGoodsStork,{goodsId:this.formstocksId,stork:this.formstocks}).then(function(e){"SUCCESS"==e.data.code&&setTimeout(function(){t.dialogFormVisible=!1,t.listFn(),t.disabledBtn=!1},1e3)}).catch(function(t){alert(t)})},deleteRow:function(t){var e=this;this.loadUse=!0,t=t instanceof Object?n()(t):n()([t]),this.$axios.post(this.$$jk.delGoods,{goodsIds:t}).then(function(t){"SUCCESS"==t.data.code&&(e.$message({message:"删除成功",type:"warning"}),setTimeout(function(){e.listFn(),e.loadUse=!0},1e3))}).catch(function(t){alert(t)})},add:function(t){console.log(t)},batchPut:function(){this.loadUse=!0;var t=this.sels.map(function(t){return t.id});console.log(this.activeName,t,void 0===t?"undefined":a()(t)),this.putaway(this.activeName,t)},allDelFn:function(){this.loadUse=!0;var t=this.sels.map(function(t){return t.id});this.deleteRow(t)},tableCurrentChange:function(t,e,s){},handleSelectionChange:function(t){this.sels=t},handleClick:function(t,e){this.loadUse=!0,this.pageNum=1,"0"==t.name||"1"==t.name?(this.isShow=t.name,this.isShelves=0):(this.isShelves=1,this.isShow=0),this.listFn()},onSearch:function(){this.loadUse=!0;sessionStorage.getItem("merchantId");this.formInline.timevalue?(this.startTime=this.formInline.timevalue[0],this.endTime=this.formInline.timevalue[1]):(this.startTime="",this.endTime=""),this.listFn()}}},W={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"list"},[s("div",{staticClass:"source"},[s("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[s("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("商家中心")]),t._v(" "),s("el-breadcrumb-item",[t._v("商品列表")])],1)],1),t._v(" "),s("div",{staticClass:"form-con"},[s("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formInline}},[s("el-form-item",{attrs:{label:"创建时间"}},[s("el-col",{attrs:{span:24}},[s("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd hh:mm:ss",type:"datetimerange",align:"right",editable:!1,"unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.formInline.timevalue,callback:function(e){t.$set(t.formInline,"timevalue",e)},expression:"formInline.timevalue"}})],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"商品名称"}},[s("el-input",{attrs:{placeholder:"请输入商品名称"},model:{value:t.formInline.productName,callback:function(e){t.$set(t.formInline,"productName",e)},expression:"formInline.productName"}})],1),t._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:t.onSearch}},[t._v("查询")])],1)],1)],1),t._v(" "),s("div",{staticClass:"tabs-con"},[s("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:"出售中的商品",name:"1"}}),t._v(" "),s("el-tab-pane",{attrs:{label:"仓库中的商品",name:"0"}}),t._v(" "),s("el-tab-pane",{attrs:{label:"违规商品",name:"2"}})],1)],1),t._v(" "),s("div",{staticClass:"table-con"},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadUse,expression:"loadUse"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.list,"tooltip-effect":"dark"},on:{"row-click":t.tableCurrentChange,"selection-change":t.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),s("el-table-column",{attrs:{prop:"goodsImage",label:"展示图"},scopedSlots:t._u([{key:"default",fn:function(t){return[s("img",{attrs:{height:"60",width:"60",src:t.row.goodsImage,alt:""}})]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"name",width:"150",label:"商品名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{staticStyle:{"white-space":"normal","word-warp":"break-word","word-break":"break-all","line-height":"26px"},attrs:{type:"text"},domProps:{textContent:t._s(e.row.name)},on:{click:function(s){t.detail(e.row.id)}}})]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"price",label:"价格"}}),t._v(" "),s("el-table-column",{attrs:{prop:"stocks",property:"stocks",label:"库存"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.stocks))]),t._v(" "),s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){t.mdf(e.row.stocks,e.row.id)}}},[s("i",{staticClass:"el-icon-edit"})])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"addTime",width:"200",label:"上架时间"}}),t._v(" "),s("el-table-column",{attrs:{prop:"isShow",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("p",[t._v(t._s(1==e.row.isShow?"上架":0==e.row.isShow?"下架":"待上架"))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"isShow",label:"操作状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(s){t.putaway(e.row.isShow,e.row.id)}}},[t._v(t._s(1==e.row.isShow?"下架":(e.row.isShow,"上架")))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{type:"text",size:"mini"},nativeOn:{click:function(s){s.preventDefault(),t.relevance(e.$index,e.row)}}},[t._v("关联分类")]),t._v(" "),s("el-button",{directives:[{name:"show",rawName:"v-show",value:0==e.row.isShow,expression:"scope.row.isShow==0"}],attrs:{type:"text",size:"mini"},nativeOn:{click:function(s){s.preventDefault(),t.editor(e.row)}}},[t._v("编辑")]),t._v(" "),s("el-button",{attrs:{type:"text",size:"mini"},nativeOn:{click:function(s){s.preventDefault(),t.deleteRow(e.row.id)}}},[t._v("删除")]),t._v(" "),s("el-dialog",{attrs:{title:"修改库存",visible:t.dialogFormVisible,modal:!1},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[s("el-form",[s("el-form-item",{attrs:{label:"库存数","label-width":t.formLabelWidth}},[s("el-input",{attrs:{type:"number"},on:{focus:t.formstocksF},model:{value:t.formstocks,callback:function(e){t.formstocks=e},expression:"formstocks"}})],1)],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{nativeOn:{click:function(e){t.dialogFormVisible=!1,t.loadUse=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary",disabled:t.disabledBtn},on:{click:function(e){t.okmdf()}}},[t._v("确 定")])],1)],1)]}}])})],1),t._v(" "),s("div",{staticClass:"btn-all"},[("0"===this.activeName?this.batchText="上架":this.batchText="下架")?s("el-button",{directives:[{name:"show",rawName:"v-show",value:1!=this.isShelves,expression:"this.isShelves!=1"}],attrs:{type:"primary",disabled:0===this.sels.length},nativeOn:{click:function(e){t.batchPut()}}},[t._v("批量"+t._s(t.batchText))]):t._e(),t._v(" "),s("el-button",{attrs:{type:"warning",disabled:0===this.sels.length},nativeOn:{click:function(e){t.allDelFn(e)}}},[t._v("批量删除")])],1)],1),t._v(" "),s("el-dialog",{attrs:{title:"关联商品分类",visible:t.dialogTreeVisible},on:{"update:visible":function(e){t.dialogTreeVisible=e}}},[t._l(t.treedata,function(e,i){return s("dl",{key:i,staticClass:"dl-con"},[s("dd",{staticClass:"dd-head"},[t._v(t._s(e.goodsMerchantCategories.name))]),t._v(" "),t._l(e.goodsMerchantCategoriesDetailList,function(e,i){return s("dt",{key:i,staticClass:"dt-body"},[s("el-checkbox",{attrs:{label:e.id,checked:1===e.status},model:{value:t.goodsMerchantCategoryIds,callback:function(e){t.goodsMerchantCategoryIds=e},expression:"goodsMerchantCategoryIds"}},[t._v(t._s(e.name))])],1)})],2)}),t._v(" "),s("el-button",{staticStyle:{"margin-top":"15px"},attrs:{type:"primary",label:t.okid},on:{click:t.getCheckedNodes}},[t._v("保 存")])],2),t._v(" "),s("div",{staticStyle:{padding:"15px"}},[s("el-pagination",{attrs:{"current-page":t.pageNum,"page-sizes":[5,10,15,20],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var J=s("VU/8")(P,W,!1,function(t){s("wlL5")},"data-v-ef7107a6",null);e.default=J.exports},wlL5:function(t,e){}});
//# sourceMappingURL=15.013ab38ca6a097416c04.js.map