webpackJsonp([2],{"+HAn":function(t,e){},"1BaX":function(t,e){},wx6L:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("Yq4J"),s("+BTi");var o=s("qubY"),i=s.n(o),r=(s("I4nB"),s("STLj")),n=s.n(r),a=(s("cDSy"),s("e0Bm")),d=s.n(a),l=(s("X+ky"),s("HJMx")),u=s.n(l),c=(s("+Rdb"),s("Mezo")),f=s.n(c),m=(s("qunJ"),s("vqwl")),p=s.n(m),h=(s("GXEp"),s("mtrD")),v=s.n(h),_=(s("jZDA"),s("91Nw")),b=s.n(_),g=(s("d7TW"),s("ajQY")),w={name:"list1",props:{listData:Array,columns:Array},components:{"el-row":s.n(g).a,"el-col":b.a,"el-button":v.a,"el-form":p.a,"el-form-item":f.a,"el-input":u.a,"el-select":d.a,"el-option":n.a,"el-dialog":i.a},data:function(){return{orderGoodsIds:[],refundSendVis:!1,sendDisabled:!1,updateTime:"",kuaidisList:[],sendFormVisible:!1,form:{name:"",currentExpress:""},rules:{currentExpress:[{required:!0,message:"请选择快递",trigger:"blur"}],name:[{required:!0,message:"请输入物流单号",trigger:"blur"}]},formLabelWidth:"120px",sendid:""}},created:function(){this.$store.state.adminleftnavnum="/order_list"},mounted:function(){},methods:{logistics:function(t,e,s){this.$router.push({path:"/logistics_detail",query:{id:t,postId:e,kuaidiName:s}})},statusFn:function(t){switch(t){case 3:case 0:return"";case 2:return"已收货";case 4:return""}},formstocksF:function(){this.sendDisabled=!1},orderStateFn:function(t){return-1==t?"":1==t?"已发货":"已收货"},payState:function(t){return 10==t?"未付款":20==t?"已付款":-10==t?"已取消":void 0},detail:function(t){window.open("http://testshop.51myd.com/hn_shop/#/goods_detail?id="+t)},goDetail:function(t){this.$router.push({path:"/order_detail",query:{id:t}})},resetForm:function(t){this.$refs[t].resetFields()},sendCancel:function(t){this.sendFormVisible=!1,this.refundSendVis=!1,this.form.name="",this.form.currentExpress="",this.$refs[t].resetFields()},send:function(t,e,s){var o=this;this.orderGoodsIds=[],this.sendid=t,this.updateTime=e,s.forEach(function(t){4!=t.status&&5!=t.status&&o.orderGoodsIds.push(t.id)});var i;(i=s.find(function(t){return 3==t.status}))&&null!=i?this.refundSendVis=!0:this.kuaidisListFn()},kuaidisListFn:function(){var t=this;this.sendDisabled=!1,this.sendFormVisible=!0,this.form.name="",this.form.currentExpress="",this.$axios.post(this.$$jk.kuaidisList,{}).then(function(e){"SUCCESS"==e.data.code&&(t.kuaidisList=e.data.data)}).catch(function(t){})},sendOk:function(t){var e=this;this.sendDisabled=!0;var s=this,o=this.orderGoodsIds.join(",");console.log(o),this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;var i=e.kuaidisList.filter(function(t){return t.name==e.form.currentExpress}),r={orderSubsId:e.sendid,orderState:1,updateTime:e.updateTime,kuaidiId:i[0].id,shippingCode:e.form.name,orderGoodsIds:o};console.log(r),e.$axios.post(e.$$jk.merchantGetDataByid,{id:i[0].id,postId:e.form.name}).then(function(t){if("SUCCESS"==t.data.code){var e=JSON.parse(t.data.data);if(console.log(e.message),"ok"!=e.message){var o=void 0;return o=201==e.status?"快递公司选择错误":"物流单号填写错误",s.$message({message:o,type:"warning"}),!1}s.sendFormVisible=!1,s.refundSendVis=!1,s.$emit("send-ok",r)}}).catch(function(t){})})},refundInfo:function(t,e,s){var o=this;if(-1==e){this.orderGoodsIds=[],s.forEach(function(t){o.orderGoodsIds.push(t.id)});var i=this.orderGoodsIds.join(",");this.$router.push({path:"/refund_detail",query:{orderGoodId:t,orderGoodsIds:i}})}else this.$router.push({path:"/refund_detail",query:{orderGoodId:t}})}}},k={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"list1"},[s("div",{staticClass:"table-con"},[s("table",{staticClass:"table"},[s("thead",[s("tr",t._l(t.columns,function(e,o){return s("th",{key:o,attrs:{width:0==o?300:100}},[t._v(t._s(e))])}))])])]),t._v(" "),t._l(t.listData,function(e,o){return s("div",{key:o,staticClass:"tableData3"},[s("el-row",{staticClass:"list-header"},[s("el-col",{attrs:{span:14}},[s("p",{staticClass:"list-col"},[t._v("订单编号："+t._s(e.orderNumber))])]),t._v(" "),s("el-col",{attrs:{span:6}},[s("p",{staticClass:"list-col"},[t._v("创建时间："+t._s(e.addTime))])]),t._v(" "),s("el-col",{attrs:{span:4}})],1),t._v(" "),s("table",{staticClass:"listtable"},[s("tbody",t._l(e.orderGoodsList,function(o,i){return s("tr",{key:i},[s("td",{attrs:{width:"300"}},[s("div",{staticClass:"flex flex-row flex-align-center pro-info"},[s("img",{attrs:{src:o.goodsImage,alt:"",width:"60",height:"60"}}),t._v(" "),s("div",{staticStyle:{display:"block",width:"100%"}},[s("el-button",{staticStyle:{"white-space":"normal","word-warp":"break-word","word-break":"break-all","line-height":"26px"},attrs:{type:"text"},on:{click:function(e){t.detail(o.goodsId)}}},[t._v(t._s(o.goodsName))])],1)])]),t._v(" "),s("td",{attrs:{width:"100"},domProps:{textContent:t._s(o.price)}}),t._v(" "),s("td",{attrs:{width:"100"},domProps:{textContent:t._s(o.goodsNum)}}),t._v(" "),s("td",{attrs:{width:"100"}},[t._v("\n            "+t._s(t.statusFn(o.status))+"\n            "),s("el-button",{directives:[{name:"show",rawName:"v-show",value:3==o.status,expression:"list.status==3"}],attrs:{type:"text"},on:{click:function(s){t.refundInfo(o.id,e.orderState,e.orderGoodsList)}}},[t._v("请卖家处理")]),t._v(" "),s("el-button",{directives:[{name:"show",rawName:"v-show",value:4==o.status,expression:"list.status==4"}],attrs:{type:"text"},on:{click:function(e){t.refundInfo(o.id,null,null)}}},[t._v("退款成功")]),t._v(" "),s("el-button",{directives:[{name:"show",rawName:"v-show",value:5==o.status,expression:"list.status==5"}],attrs:{type:"text"},on:{click:function(e){t.refundInfo(o.id,null,null)}}},[t._v("已退款")])],1),t._v(" "),0==i?s("td",{attrs:{width:"100",rowspan:e.orderGoodsList.length},domProps:{textContent:t._s(e.buyerName)}}):t._e(),t._v(" "),0==i?s("td",{attrs:{width:"100",rowspan:e.orderGoodsList.length},domProps:{textContent:t._s(e.paymentName)}}):t._e(),t._v(" "),0==i?s("td",{attrs:{width:"100",rowspan:e.orderGoodsList.length},domProps:{textContent:t._s(e.orderAmount)}}):t._e(),t._v(" "),0==i?s("td",{attrs:{width:"100",rowspan:e.orderGoodsList.length}},[-10==e.tradeStatus?s("p",[t._v("交易取消")]):20==e.tradeStatus&&-1!=e.orderState&&1!=e.orderState&&3!=o.status&&1!=o.status?s("p",[t._v("交易完成")]):s("div",[s("el-button",{directives:[{name:"show",rawName:"v-show",value:-1==e.orderState&&-10!=e.payState&&10!=e.payState,expression:"item.orderState==-1&&item.payState!=-10&&item.payState!=10"}],staticStyle:{"margin-top":"15px"},attrs:{type:"primary",size:"mini"},on:{click:function(s){s.preventDefault(),t.send(e.id,e.updateTime,e.orderGoodsList)}}},[t._v("发货")])],1),t._v(" "),s("el-button",{staticStyle:{margin:"0 auto"},attrs:{type:"text"},on:{click:function(s){s.preventDefault(),t.goDetail(e.id)}}},[t._v("订单详情")]),t._v(" "),-10!=e.tradeStatus&&-1!=e.orderState?s("el-button",{staticStyle:{margin:"0 auto","padding-top":"0"},attrs:{type:"text"},on:{click:function(s){s.preventDefault(),t.logistics(e.kuaidiId,e.shippingCode,e.kuaidiName)}}},[t._v("物流详情")]):t._e()],1):t._e()])}))]),t._v(" "),s("p",{staticClass:"leave-message text-left"},[s("span",[t._v("留言："+t._s(e.orderMessage))])])],1)}),t._v(" "),s("el-dialog",{attrs:{title:"订单发货",visible:t.sendFormVisible},on:{"update:visible":function(e){t.sendFormVisible=e}}},[s("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[s("el-form-item",{attrs:{label:"快递","label-width":t.formLabelWidth,prop:"currentExpress"}},[s("el-select",{on:{change:t.formstocksF},model:{value:t.form.currentExpress,callback:function(e){t.$set(t.form,"currentExpress",e)},expression:"form.currentExpress"}},t._l(t.kuaidisList,function(t,e){return s("el-option",{key:e,attrs:{value:t.name}})}))],1),t._v(" "),s("el-form-item",{attrs:{label:"物流单号","label-width":t.formLabelWidth,prop:"name"}},[s("el-input",{attrs:{"auto-complete":"off",type:"number"},on:{focus:t.formstocksF},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.sendCancel("form")}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary",disabled:t.sendDisabled},on:{click:function(e){t.sendOk("form")}}},[t._v("确 定")])],1)],1),t._v(" "),s("el-dialog",{attrs:{visible:t.refundSendVis},on:{"update:visible":function(e){t.refundSendVis=e}}},[s("p",[t._v("本订单中的部分宝贝，买家已经提交退款申请，进行发货操作将撤销订单中所有退款，是否继续")]),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.refundSendVis=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.kuaidisListFn()}}},[t._v("确 定")])],1)])],2)},staticRenderFns:[]};var y=s("VU/8")(w,k,!1,function(t){s("1BaX"),s("+HAn")},"data-v-8a1b9052",null);e.default=y.exports}});
//# sourceMappingURL=2.231282eb69e36252fab3.js.map